# Nginx CORS proxy snippet for HamClock-Next WASM
# Add to your server block; set HC_CORS_PROXY_URL="/proxy/" at build time.

location /proxy/ {
    # Strip /proxy/ prefix and forward to target host
    # Usage: /proxy/https://services.swpc.noaa.gov/...
    rewrite ^/proxy/(https?://.+)$ /$1 break;
    proxy_pass $1;
    add_header 'Access-Control-Allow-Origin' '*' always;
    add_header 'Access-Control-Allow-Methods' 'GET, OPTIONS' always;
    proxy_ssl_server_name on;
}
